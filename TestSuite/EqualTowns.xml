<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="5d47a4f7-043a-4d57-8cf4-b6d8e24231ab" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="EqualTowns" searchProperties="true" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="5d47a4f7-043a-4d57-8cf4-b6d8e24231abfileName">EqualTowns</con:setting></con:settings><con:testStep type="datagen" name="generateFirstIP" id="e36b6dd0-bb7d-4e9a-ab5f-3d5abd52db1b"><con:settings/><con:config xsi:type="con:DataGeneratorStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:property type="Script"><con:configuration><script>def int i=Math.abs(new Random().nextInt()) % 100 + 1;
String ip = "213.252.105." + i.toString();
return ip
</script></con:configuration><con:name>ip</con:name><con:mode>STEP</con:mode><con:shared>false</con:shared></con:property></con:config></con:testStep><con:testStep type="restrequest" name="getCityByOneIP" id="6824a89c-df15-41fd-88ee-a4e2638739e6"><con:settings/><con:config service="http://geoip.elib.ru" methodName="Getdata_mini.pl" resourcePath="/cgi-bin/getdata_mini.pl" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCityByOneIP" id="a3620fab-7da5-4041-8c8b-cde125cde61b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://geoip.elib.ru</con:endpoint><con:request/><con:originalUri>http://geoip.elib.ru/cgi-bin/getdata_mini.pl</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="03143e16-796f-4f4c-a2d5-9c59b40cfa74" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="3c33188c-23d2-4b07-9e00-d84cd15d2ea7" name="Script Assertion"><con:configuration><scriptText>assert messageExchange.responseHeaders.get("Content-Encoding").contains("gzip")</scriptText></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="ip" value="${generateFirstIP#ip}"/>
  <con:entry key="sid" value="6UZ9HPN8"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="datagen" name="generateSecondIP" id="cfa541ce-1425-435b-aaf1-bcc9ca630781"><con:settings/><con:config xsi:type="con:DataGeneratorStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:property type="Script"><con:configuration><script>def int i=Math.abs(new Random().nextInt()) % 100 + 1;
String ip = "213.252.105." + i.toString();
return ip
</script></con:configuration><con:name>ip</con:name><con:mode>STEP</con:mode><con:shared>false</con:shared></con:property></con:config></con:testStep><con:testStep type="restrequest" name="getCityByAnotherIP" id="d65e74f6-c06b-4a9b-ae64-906b476fb5fb"><con:settings/><con:config service="http://geoip.elib.ru" methodName="Getdata_mini.pl" resourcePath="/cgi-bin/getdata_mini.pl" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCityByAnotherIP" id="4d07233b-840d-4db0-844f-82aaafb05707" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://geoip.elib.ru</con:endpoint><con:request/><con:originalUri>http://geoip.elib.ru/cgi-bin/getdata_mini.pl</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c9f3283d-7139-475a-a03b-a2acce2b499d" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c0b4acbe-08f7-4b74-9802-ad861a3abaf8" name="Script Assertion"><con:configuration><scriptText>assert messageExchange.responseHeaders.get("Content-Encoding").contains("gzip")</scriptText></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="ip" value="${generateSecondIP#ip}"/>
  <con:entry key="sid" value="6UZ9HPN8"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="CompareContent" id="ce56dfbb-e751-40cb-b600-57013b782472"><con:settings/><con:config><script>def response1 = context.expand( '${getCityByOneIP#Response}' )
def response2 = context.expand( '${getCityByAnotherIP#Response}' )
assert response1 == response2
</script></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>6824a89c-df15-41fd-88ee-a4e2638739e6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e36b6dd0-bb7d-4e9a-ab5f-3d5abd52db1b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfa541ce-1425-435b-aaf1-bcc9ca630781</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase>